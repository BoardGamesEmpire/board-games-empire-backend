model UserPermission {
  id     String @id @default(cuid(2))

  user   User   @relation(fields: [userId], references: [id])
  userId String @map("user_id")

  permission Permission @map("permission")

  resourceType ResourceType @map("resource_type")
  resourceId   String?      @map("resource_id")

  grantedBy   User      @relation("PermissionGranter", fields: [grantedById], references: [id])
  grantedById String    @map("granted_by_id")
  expiresAt   DateTime? @map("expires_at") @db.Timestamptz(3)

  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz(3)
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz(3)

  @@unique([userId, permission, resourceType, resourceId])
  @@map("user_permissions")
}
