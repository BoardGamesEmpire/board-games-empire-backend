model Role {
  id String @id @default(cuid(2))

  name        String  @unique
  description String?
  isSystem    Boolean @default(false) @map("is_system")

  permissions RolePermission[]
  invites     Invite[]

  userRoles      UserRole[]
  householdRoles HouseholdRole[]
  eventAttendeeRoles EventAttendeeRole[]

  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz(3)
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz(3)

  @@map("roles")
}

model RolePermission {
  id     String @id @default(cuid(2))

  role   Role   @relation(fields: [roleId], references: [id])
  roleId String @map("role_id")

  permission Permission @relation(fields: [permissionId], references: [id])
  permissionId String @map("permission_id")

  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz(3)

  @@unique([roleId, permissionId])
  @@map("role_permissions")
}

enum SystemRole {
  Owner
  Admin
  Moderator
  User

  HouseholdOwner
  HouseholdAdmin
  HouseholdMember
  HouseholdGuest

  EventHost
  EventCoHost
  EventOrganizer
  EventModerator
  EventParticipant
  EventGuest
  EventSpectator

  @@map("system_roles")
}

enum Action {
  Create
  Read
  Update
  Delete
  Manage

  @@map("actions")
}
