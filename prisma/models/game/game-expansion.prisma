model GameExpansion {
  id   String @id @default(cuid(2))
  name String

  baseGame   Game   @relation("BaseGame", fields: [baseGameId], references: [id], onDelete: Cascade)
  baseGameId String @map("base_game_id")

  description  String?
  releaseYear  Int?    @map("release_year")
  isStandalone Boolean @default(false) @map("is_standalone")

  // Hierarchy for expansions of expansions
  parentExpansion   GameExpansion?  @relation("ExpansionHierarchy", fields: [parentExpansionId], references: [id])
  parentExpansionId String?         @map("parent_expansion_id")
  childExpansions   GameExpansion[] @relation("ExpansionHierarchy")

  compatibleWith ExpansionCompatibility[]
  ruleVariants   GameExpansionRuleVariant[]

  playSessionsUsed  GamePlaySessionExpansion[]
  ruleVariantUsages RuleVariantUsageExpansion[]

  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz(3)
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz(3)

  @@index([baseGameId])
  @@index([parentExpansionId])
  @@map("game_expansions")
}
